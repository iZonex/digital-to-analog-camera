# Digital Camera to Analog

## Огляд

Цей файл README описує використання Bash-скрипта, призначеного для автоматизації налаштування та розгортання сервісів на Raspberry Pi для системи стрімінгу камери. Скрипт копіює необхідні файли, встановлює сервіси та налаштовує параметри.

## Передумови

- Камера https://a.aliexpress.com/_Ev3qmSv або аналог 200X Zoom RTMP IP Camera IVM4200 P2P ONVIF IMX415 SD 256GB IP Camera
- Raspberry Pi 4 2Gb має бути підключений до мережі та мати включений SSH.
- На Raspberry Pi має бути налаштовано користувача за замовчуванням або користувача з достатніми правами для встановлення програм та управління сервісами.
- Скрипт та супутні файли (`fpv_camera.service`, `fpv_camera.py`, `rtsp_stream.service`) мають бути розташовані у тій же директорії, з якої виконується скрипт.

## Опис файлів

- `fpv_camera.service`: Файл служби systemd для керування сервісом камери.
- `fpv_camera.py`: Python-скрипт для функціоналу камери.
- `rtsp_stream.service`: Файл служби systemd для керування сервісом RTSP потоку.

## Налаштування

1. **Налаштування скрипта:**
   - Переконайтесь, що скрипт (`setup_script.sh`) має права на виконання:
     ```bash
     chmod +x setup_script.sh
     ```

2. **Запуск скрипта:**
   - Виконайте скрипт, передавши йому як аргумент IP-адресу вашого Raspberry Pi:
     ```bash
     ./setup_script.sh 192.168.3.211
     ```
   - Замініть `192.168.3.211` на фактичну IP-адресу вашого Raspberry Pi.

## Що робить скрипт

1. **Конфігурація змінних:**
   - Встановлює змінні для користувача, хоста та шляху згідно з аргументами скрипта та попередньо визначеними налаштуваннями.

2. **Копіювання файлів:**
   - Копіює файли `fpv_camera.service`, `fpv_camera.py`, та `rtsp_stream.service` до вказаної директорії на Raspberry Pi за допомогою SCP.

3. **Команди через SSH:**
   - Підключається до Raspberry Pi та перевіряє, чи було вже виконано налаштування, щоб уникнути повторного встановлення.
   - Якщо налаштування не було виконане:
     - Оновлює та встановлює `rinetd`.
     - Переміщує файли служб до `/etc/systemd/system/` та активує їх.
     - Модифікує конфігурацію завантаження для оптимізованої роботи.
     - Додає правила переадресації портів до `rinetd.conf`.
     - Створює файл-прапорець, який вказу

є на завершення налаштування.

## Після налаштування

Після успішного виконання скрипта:
- Сервіси камери та RTSP стрімінгу будуть налаштовані та запущені.
- Скрипт виведе повідомлення про підтвердження.

## Вирішення проблем

- Переконайтесь, що Raspberry Pi доступний у мережі за вказаною IP-адресою.
- Перевірте, що SSH включений та користувач має права sudo.
- Перевірте права та наявність необхідних файлів у вказаних директоріях.

## Додаткові налаштування

- **Логін і пароль за замовчуванням для доступу до камери:** `zym`, `zym`.
- **Важливо активувати Composite Video Output через `raspi-config`.**
- **Підключення до 18 піна для керування сервоприводом з польотного контролера.**
- **Для підключення камери через Ethernet необхідно модифікувати кабель, залишивши лише 4 провідника.**


Слідуючи цим інструкціям, ви можете автоматизувати налаштування та розгортання сервісів стрімінгу камер на Raspberry Pi.